function e(e,t,n,a){Object.defineProperty(e,t,{get:n,set:a,enumerable:!0,configurable:!0})}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire30d9;t.register("8082t",(function(n,a){var s;s=n.exports,Object.defineProperty(s,"__esModule",{value:!0,configurable:!0}),e(n.exports,"default",(()=>f));var i=t("7C6UD"),c=t("eCRxs"),o=t("kYfAi"),r=t("enOpT"),l=t("4yknE"),d=t("eltSV"),u=t("9aCo1"),p=t("5H5kc"),m=t("dv2Dk");var f=function({invoices:e,companies:t,contacts:n,setIsLoaded:a,isAuth:s}){const f=e.length>0;let h=o.useParams();const v=o.useNavigate(),y=e.find((e=>e.id==h.invoiceId)),x=y?t.find((e=>e.id==y.company)):null,j=y?n.find((e=>e.id==y.contact)):null;let C=y?y.received.slice(0,4):null,g=y?y.received.slice(5,7):null,b=y?y.received.slice(8,10):null;const[k,T]=c.useState(!1),[P,O]=c.useState(!1),[S,I]=c.useState(x),[$,N]=c.useState(j),[D,R]=c.useState(!1);c.useEffect((()=>{y||v("/invoices")}),[e]);const w=c.useRef(),M=c.useRef(),V=c.useRef(),q=c.useRef();return i.jsxs("main",{children:[!D&&f&&y?i.jsxs("div",{className:"card",children:[i.jsxs("h2",{children:["Details about invoice ",y.reference]}),i.jsxs("div",{className:"invoiceGrid",children:[i.jsx("span",{children:"Reference : "}),k?i.jsx("input",{type:"text",name:"reference",ref:w,defaultValue:y.reference,required:!0}):i.jsx("span",{id:"invoiceReference",children:y.reference}),i.jsx("span",{children:"Amount : "}),k?i.jsx("input",{type:"number",name:"amount",ref:M,defaultValue:y.amount,required:!0}):i.jsxs("span",{id:"invoiceAmout",children:[y.amount," â‚¬"]}),i.jsx("span",{children:"Company : "}),k?i.jsx(l.default,{companies:t,handleCompanyChange:e=>{I(e)},currentCompany:x}):i.jsx("span",{id:"invoiceCompany",onClick:()=>{v(`/company/${x.id}`)},style:{cursor:"pointer"},children:x.name}),i.jsx("span",{children:"Contact : "}),k?i.jsx(d.default,{contacts:n,currentContact:j,currentCompany:x,selectedCompany:S,handleContactChange:e=>{N(n.find((t=>`${t.firstname} ${t.lastname}`==e)))}}):i.jsx("span",{id:"invoiceContact",onClick:()=>{v(`/contact/${j.id}`)},style:{cursor:"pointer"},children:`${j.firstname} ${j.lastname}`}),i.jsx("span",{children:"Date : "}),k?i.jsx("input",{type:"date",name:"date",ref:V,defaultValue:`${C}-${g}-${b}`,required:!0}):i.jsx("span",{id:"invoiceReceived",children:`${b}-${g}-${C}`}),i.jsx("span",{children:"Paid status : "}),k?i.jsxs("label",{htmlFor:"paid",className:"switchToggle",children:[y.paid?i.jsx("input",{type:"checkbox",name:"paid",id:"paid",className:"switchCheck",ref:q,defaultChecked:!0}):i.jsx("input",{type:"checkbox",name:"paid",id:"paid",className:"switchCheck",ref:q}),i.jsx("span",{className:"slider"})]}):i.jsx("span",{children:y.paid?"Paid":"To be paid"})]}),"Admin"==s.role?i.jsx(r.default,{invoice:y.id,isModifying:k,setIsModifying:T,isDeleting:P,setIsDeleting:O,originalCompany:x,setSelectedCompany:I,originalContact:j,setSelectedContact:N,handleModif:async()=>{const e={reference:w.current.value,amount:M.current.value,company:S.id.toString(),contact:n.find((e=>e.name==$.name)).id.toString(),received:V.current.value,paid:q.current.checked};let t=p.invoiceVerify(e);if(R(!0),t.ok){const{status:t,message:n,dataPackage:i}=await u.default("PUT",`https://csharpproject.somee.com/api/invoice/${h.invoiceId}`,s.jwt,e);a(!1),R(!1),200===t?setTimeout((()=>{m.toast.success(n,{position:m.toast.POSITION.BOTTOM_RIGHT})}),250):setTimeout((()=>{m.toast.error(n,{position:m.toast.POSITION.BOTTOM_RIGHT})}),250)}else{R(!1);const e=Object.keys(t);setTimeout((()=>{for(let n of e)"ok"!==n&&m.toast.error(t[n],{position:m.toast.POSITION.BOTTOM_RIGHT})}),250)}},handleDelete:async()=>{R(!0);const{status:e,message:t}=await u.default("DELETE",`https://csharpproject.somee.com/api/Invoice/${y.id}`,s.jwt);R(!1),200!==e&&m.toast.error("There was an error deleting this invoice",{position:m.toast.POSITION.BOTTOM_RIGHT}),sessionStorage.setItem("cogipToast","Success !"),O(!1),a(!1)}}):""]}):i.jsx("div",{className:"fetching",children:i.jsx("div",{className:"lds-dual-ring"})}),i.jsx(m.ToastContainer,{})]})}})),t.register("enOpT",(function(n,a){e(n.exports,"default",(()=>i));var s=t("7C6UD");var i=function({isModifying:e,setIsModifying:t,setSelectedCompany:n,originalCompany:a,isDeleting:i,setIsDeleting:c,originalContact:o,setSelectedContact:r,handleModif:l,handleDelete:d}){return e?s.jsxs("div",{className:"invoiceControls",children:[s.jsx("button",{type:"button",onClick:l,children:"Submit"}),s.jsx("button",{type:"button",onClick:()=>{t(!1),n(a),r(o)},children:"Cancel"})]}):i?s.jsxs("div",{className:"invoiceControls",children:[s.jsx("button",{type:"button",onClick:d,children:"Confirm"}),s.jsx("button",{type:"button",onClick:()=>{c(!1)},children:"Cancel"})]}):s.jsxs("div",{className:"invoiceControls",children:[s.jsx("button",{type:"button",onClick:()=>{t(!0)},children:"Modify"}),s.jsx("button",{type:"button",onClick:()=>{c(!0)},children:"Delete"})]})}})),t.register("4yknE",(function(n,a){e(n.exports,"default",(()=>i));var s=t("7C6UD");var i=function({companies:e,handleCompanyChange:t,currentCompany:n,name:a}){return s.jsxs("select",{onChange:n=>{let a=e.find((e=>e.name==n.target.value))?e.find((e=>e.name==n.target.value)):"";t(a)},defaultValue:n.name,name:a,required:!0,children:[s.jsx("option",{value:"",children:"Select a company"}),e.map((e=>s.jsx("option",{value:e.name,children:e.name},e.id)))]})}})),t.register("eltSV",(function(n,a){e(n.exports,"default",(()=>i));var s=t("7C6UD");var i=function({contacts:e,selectedCompany:t,currentContact:n,handleContactChange:a}){return s.jsxs("select",{onChange:e=>{a(e.target.value)},defaultValue:`${n.firstname} ${n.lastname}`,required:!0,children:[s.jsx("option",{value:"",children:""==t?"Select a company first":"Select a contact"}),e.map((e=>{if(""!=t)return t.id==e.contactcompany?s.jsx("option",{value:`${e.firstname} ${e.lastname}`,children:`${e.firstname} ${e.lastname}`},e.id):void 0}))]})}})),t.register("5H5kc",(function(t,n){e(t.exports,"invoiceVerify",(()=>a)),e(t.exports,"contactVerify",(()=>s)),e(t.exports,"companyVerify",(()=>i));const a=e=>{let t={};return e.reference||(t.reference="Please enter a reference"),e.company||(t.company="Please select a company"),e.amount||(t.amount="Please enter an amount"),e.contact||(t.contact="Please select a contact"),e.received||(t.received="Please select a date"),!1!==e.paid&&!0!==e.paid&&(t.paid="Please select a paid status"),t.ok=!(Object.keys(t).length>0),t},s=e=>{let t={};return e.firstname||(t.firstname="Please enter a firstname"),e.lastname||(t.lastname="Please enter a lastname"),e.contactcompany||(t.contactcompany="Please select a contact"),e.email||(t.email="Please enter an email"),e.phonenumber||(t.phonenumber="Please enter a phone number"),t.ok=!(Object.keys(t).length>0),t},i=e=>{let t={};return e.name||(t.name="Please enter a name"),e.vat||(t.vat="Please enter a vat number"),e.status||(t.status="Please select a status"),t.ok=!(Object.keys(t).length>0),t}}));
//# sourceMappingURL=Invoice.41795c49.js.map
