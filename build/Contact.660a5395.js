function e(e,t,n,a){Object.defineProperty(e,t,{get:n,set:a,enumerable:!0,configurable:!0})}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire30d9;t.register("eXfZI",(function(n,a){var s;s=n.exports,Object.defineProperty(s,"__esModule",{value:!0,configurable:!0}),e(n.exports,"default",(()=>p));var o=t("7C6UD"),c=t("eCRxs"),i=t("kYfAi"),r=t("9jFXu"),l=t("4yknE"),u=t("9aCo1"),d=t("5H5kc"),m=t("dv2Dk");var p=function({contacts:e,companies:t,setIsLoaded:n,isAuth:a}){const s=e.length>0,p=i.useParams(),f=i.useNavigate(),h=e.find((e=>e.id==p.contactId)),y=h?t.find((e=>e.id==h.contactcompany)):null,[j,x]=c.useState(y),[g,b]=c.useState(!1),[v,C]=c.useState(!1),[P,T]=c.useState(!1);c.useEffect((()=>{h||f("/contacts")}),[e]);const k=c.useRef(),O=c.useRef(),I=c.useRef(),S=c.useRef();return o.jsxs("main",{children:[!P&&s&&h?o.jsxs("div",{className:"card",children:[o.jsxs("h2",{children:[h.firstname," ",h.lastname]}),o.jsxs("div",{className:"contactGrid",children:[o.jsx("span",{children:"Firstname : "}),g?o.jsx("input",{type:"text",name:"contactFirstname",defaultValue:h.firstname,ref:k}):o.jsx("span",{id:"contactFirstname",children:h.firstname}),o.jsx("span",{children:"Lastname : "}),g?o.jsx("input",{type:"text",name:"contactLastname",defaultValue:h.lastname,ref:O}):o.jsx("span",{id:"contactLastname",children:h.lastname}),o.jsx("span",{children:"Company : "}),g?o.jsx(l.default,{currentCompany:y,companies:t,name:"contactCompany",handleCompanyChange:e=>{x(e)}}):o.jsx("span",{id:"contactCompany",onClick:()=>{f(`/company/${y.id}`)},style:{cursor:"pointer"},children:y.name}),o.jsx("span",{children:"Email : "}),g?o.jsx("input",{type:"text",name:"contactEmail",defaultValue:h.email,ref:I}):o.jsx("span",{id:"contactEmail",children:h.email}),o.jsx("span",{children:"Phone number : "}),g?o.jsx("input",{type:"text",name:"contactPhonenumber",defaultValue:h.phonenumber,ref:S}):o.jsx("span",{id:"contactPhonenumber",children:h.phonenumber})]}),"Admin"==a.role?o.jsx(r.default,{isModifying:g,setIsModifying:b,isDeleting:v,setIsDeleting:C,handleModif:async()=>{const e={firstname:k.current.value,lastname:O.current.value,contactcompany:j.id.toString(),email:I.current.value,phonenumber:S.current.value};let t=d.contactVerify(e);if(T(!0),t.ok){const{status:t,message:s,dataPackage:o}=await u.default("PUT",`https://csharpproject.somee.com/api/contact/${p.contactId}`,a.jwt,e);n(!1),T(!1),200===t?setTimeout((()=>{m.toast.success(s,{position:m.toast.POSITION.BOTTOM_RIGHT})}),250):setTimeout((()=>{m.toast.error(s,{position:m.toast.POSITION.BOTTOM_RIGHT})}),250)}else{T(!1);const e=Object.keys(t);setTimeout((()=>{for(let n of e)"ok"!==n&&m.toast.error(t[n],{position:m.toast.POSITION.BOTTOM_RIGHT})}),250)}},handleDelete:async()=>{T(!0);const{status:e,message:t}=await u.default("DELETE",`https://csharpproject.somee.com/api/Contact/${h.id}`,a.jwt);T(!1),200!==e&&m.toast.error("There was an error deleting this contact",{position:m.toast.POSITION.BOTTOM_RIGHT}),sessionStorage.setItem("cogipToast","Success !"),C(!1),n(!1)}}):""]}):o.jsx("div",{className:"fetching",children:o.jsx("div",{className:"lds-dual-ring"})}),o.jsx(m.ToastContainer,{})]})}})),t.register("9jFXu",(function(n,a){e(n.exports,"default",(()=>o));var s=t("7C6UD");var o=function({isModifying:e,isDeleting:t,setIsModifying:n,setIsDeleting:a,handleModif:o,handleDelete:c}){return e?s.jsxs("div",{className:"contactControls",children:[s.jsx("button",{type:"button",onClick:o,children:"Submit"}),s.jsx("button",{type:"button",onClick:()=>{n(!1)},children:"Cancel"})]}):t?s.jsxs("div",{className:"contactControls",children:[s.jsx("button",{type:"button",onClick:c,children:"Confirm"}),s.jsx("button",{type:"button",onClick:()=>{a(!1)},children:"Cancel"})]}):s.jsxs("div",{className:"contactControls",children:[s.jsx("button",{type:"button",onClick:()=>{n(!0)},children:"Modify"}),s.jsx("button",{type:"button",onClick:()=>{a(!0)},children:"Delete"})]})}})),t.register("4yknE",(function(n,a){e(n.exports,"default",(()=>o));var s=t("7C6UD");var o=function({companies:e,handleCompanyChange:t,currentCompany:n,name:a}){return s.jsxs("select",{onChange:n=>{let a=e.find((e=>e.name==n.target.value))?e.find((e=>e.name==n.target.value)):"";t(a)},defaultValue:n.name,name:a,required:!0,children:[s.jsx("option",{value:"",children:"Select a company"}),e.map((e=>s.jsx("option",{value:e.name,children:e.name},e.id)))]})}})),t.register("5H5kc",(function(t,n){e(t.exports,"invoiceVerify",(()=>a)),e(t.exports,"contactVerify",(()=>s)),e(t.exports,"companyVerify",(()=>o));const a=e=>{let t={};return e.reference||(t.reference="Please enter a reference"),e.company||(t.company="Please select a company"),e.amount||(t.amount="Please enter an amount"),e.contact||(t.contact="Please select a contact"),e.received||(t.received="Please select a date"),!1!==e.paid&&!0!==e.paid&&(t.paid="Please select a paid status"),t.ok=!(Object.keys(t).length>0),t},s=e=>{let t={};return e.firstname||(t.firstname="Please enter a firstname"),e.lastname||(t.lastname="Please enter a lastname"),e.contactcompany||(t.contactcompany="Please select a contact"),e.email||(t.email="Please enter an email"),e.phonenumber||(t.phonenumber="Please enter a phone number"),t.ok=!(Object.keys(t).length>0),t},o=e=>{let t={};return e.name||(t.name="Please enter a name"),e.vat||(t.vat="Please enter a vat number"),e.status||(t.status="Please select a status"),t.ok=!(Object.keys(t).length>0),t}}));
//# sourceMappingURL=Contact.660a5395.js.map
