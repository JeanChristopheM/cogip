{"mappings":"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","sources":["src/components/invoices/Invoices.jsx","src/logic/dateFormatter.js"],"sourcesContent":["import { useMemo, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useTable, useSortBy, useFilters } from \"react-table\";\nimport SelectFilter from \"../reusables/SelectFilter\";\nimport { dateFormatter } from \"../../logic/dateFormatter\";\nimport { ToastContainer, toast } from \"react-toastify\";\n\nfunction Invoices({ invoices, contacts, companies }) {\n  useEffect(() => {\n    const message = sessionStorage.getItem(\"cogipToast\");\n    if (!message) return;\n    toast.success(message, {\n      position: toast.POSITION.BOTTOM_RIGHT,\n    });\n    sessionStorage.removeItem(\"cogipToast\");\n  }, []);\n  const navigate = useNavigate();\n  const handleAdd = (e) => {\n    navigate(`/${e.target.id}`);\n  };\n  /* SETTING UP TABLE */\n  const data = useMemo(() => {\n    let results = [];\n    for (let entry of invoices) {\n      const company = companies.find((el) => el.id == entry.company);\n      const contact = contacts.find((el) => el.id == entry.contact);\n      let arrow = company.status === \"Client\" ? \"down\" : \"up\";\n      let obj = {\n        icon: <i className={`fas fa-arrow-${arrow}`}></i>,\n        col1: entry.reference,\n        col2: `${entry.amount}â‚¬`,\n        col3: company.name,\n        col4: `${contact.firstname} ${contact.lastname}`,\n        col5: dateFormatter(entry.received),\n        col6: entry.paidStatus ? \"Paid\" : \"To be paid\",\n        id: entry.id,\n      };\n      results.push(obj);\n    }\n    return results;\n  }, [invoices]);\n  const columns = useMemo(\n    () => [\n      {\n        Header: \"\",\n        accessor: \"icon\",\n        className: \"invoiceIcon\",\n        disableSortBy: true,\n        disableFilters: true,\n      },\n      {\n        Header: \"Reference\",\n        accessor: \"col1\",\n        className: \"invoiceReference\",\n        disableFilters: true,\n      },\n      {\n        Header: \"Amount\",\n        accessor: \"col2\",\n        className: \"invoiceAmount\",\n        disableFilters: true,\n      },\n      {\n        Header: \"Company\",\n        accessor: \"col3\",\n        className: \"invoiceCompany\",\n        Filter: SelectFilter,\n        filter: \"includes\",\n      },\n      {\n        Header: \"Contact\",\n        accessor: \"col4\",\n        className: \"invoiceContact\",\n        Filter: SelectFilter,\n        filter: \"includes\",\n      },\n      {\n        Header: \"Received\",\n        accessor: \"col5\",\n        className: \"invoiceReceived\",\n        disableFilters: true,\n      },\n      {\n        Header: \"Status\",\n        accessor: \"col6\",\n        className: \"invoicePaid\",\n        Filter: SelectFilter,\n        filter: \"includes\",\n      },\n      {\n        Header: \"ID\",\n        accessor: \"id\",\n        className: \"contactId\",\n        disableFilters: true,\n      },\n    ],\n    [invoices]\n  );\n  const { getTableProps, getTableBodyProps, headerGroups, rows, prepareRow } =\n    useTable(\n      {\n        columns,\n        data,\n        initialState: {\n          sortBy: [{ id: \"col1\", desc: false }],\n          hiddenColumns: [\"id\"],\n        },\n      },\n      useFilters,\n      useSortBy\n    );\n  const handleClick = (header, contactName, companyName, invoiceId) => {\n    switch (header) {\n      case \"Contact\":\n        navigate(\n          `/contact/${\n            contacts.find(\n              (el) => `${el.firstname} ${el.lastname}` == contactName\n            ).id\n          }`\n        );\n        break;\n      case \"Company\":\n        navigate(\n          `/company/${companies.find((el) => el.name == companyName).id}`\n        );\n        break;\n      case \"Reference\":\n        navigate(`/invoice/${invoiceId}`);\n        break;\n      default:\n        break;\n    }\n  };\n  return (\n    <main>\n      <section className=\"invoices card\">\n        <h2>\n          Invoices\n          <button\n            type=\"button\"\n            id=\"invoiceAdd\"\n            onClick={handleAdd}\n            style={{ padding: \"0 .5rem\" }}\n          >\n            +\n          </button>\n        </h2>\n        <table className=\"table\" {...getTableProps()}>\n          <thead>\n            {headerGroups.map((headerGroup) => (\n              <tr {...headerGroup.getHeaderGroupProps()}>\n                {headerGroup.headers.map((column) => (\n                  <th\n                    {...column.getHeaderProps(\n                      column.getSortByToggleProps({\n                        className: column.className,\n                      })\n                    )}\n                  >\n                    <div className=\"thContainer\">\n                      {column.render(\"Header\")}\n                      <span>\n                        {column.isSorted ? (\n                          column.isSortedDesc ? (\n                            <i className=\"fas fa-arrow-alt-circle-up sorted\"></i>\n                          ) : (\n                            <i className=\"fas fa-arrow-alt-circle-down sorted\"></i>\n                          )\n                        ) : (\n                          <i className=\"fas fa-arrow-alt-circle-down unSorted\"></i>\n                        )}\n                      </span>\n                    </div>\n                  </th>\n                ))}\n              </tr>\n            ))}\n            {headerGroups.map((headerGroup) => (\n              <tr\n                {...headerGroup.getHeaderGroupProps()}\n                className={\"filtersRow\"}\n              >\n                {headerGroup.headers.map((column) => (\n                  <th\n                    key={column.id}\n                    {...column.getHeaderProps({\n                      className: column.className,\n                    })}\n                  >\n                    <div className=\"filterContainer\">\n                      {column.canFilter ? column.render(\"Filter\") : null}\n                    </div>\n                  </th>\n                ))}\n              </tr>\n            ))}\n          </thead>\n          <tbody {...getTableBodyProps()}>\n            {rows.map((row) => {\n              prepareRow(row);\n              return (\n                <tr {...row.getRowProps()}>\n                  {row.cells.map((cell) => {\n                    return (\n                      <td\n                        {...cell.getCellProps({\n                          className: cell.column.className,\n                        })}\n                        onClick={() => {\n                          handleClick(\n                            cell.column.Header,\n                            cell.row.allCells[4].value,\n                            cell.row.allCells[3].value,\n                            cell.row.allCells[7].value\n                          );\n                        }}\n                      >\n                        {cell.render(\"Cell\")}\n                      </td>\n                    );\n                  })}\n                </tr>\n              );\n            })}\n          </tbody>\n        </table>\n      </section>\n      <ToastContainer />\n    </main>\n  );\n}\n\nexport default Invoices;\n","const dateFormatter = (dateInput) => {\n  const dateOutput = `${dateInput.slice(8, 10)}-${dateInput.slice(\n    5,\n    7\n  )}-${dateInput.slice(0, 4)}`;\n  return dateOutput;\n};\nexport { dateFormatter };\n"],"names":["$d462550c5b3a69a6$export$2e2bcd8739ae039","invoices","contacts","companies","$eCRxs","useEffect","message","sessionStorage","getItem","$dv2Dk","toast","success","position","POSITION","BOTTOM_RIGHT","removeItem","navigate","$kYfAi","useNavigate","data","useMemo","results","entry","company","find","el","id","contact","arrow","status","obj","icon","$7C6UD","jsx","className","col1","reference","col2","amount","col3","name","col4","firstname","lastname","col5","$gXTmb","dateFormatter","received","col6","paidStatus","push","columns","Header","accessor","disableSortBy","disableFilters","Filter","$bjE0N","default","filter","getTableProps","getTableBodyProps","headerGroups","rows","prepareRow","$3NGAg","useTable","initialState","sortBy","desc","hiddenColumns","useFilters","useSortBy","jsxs","type","onClick","e","target","style","padding","map","headerGroup","getHeaderGroupProps","headers","column","getHeaderProps","getSortByToggleProps","render","isSorted","isSortedDesc","canFilter","row","getRowProps","cells","cell","getCellProps","header","contactName","companyName","invoiceId","handleClick","allCells","value","ToastContainer","$c59d18b9d58e05d0$export$406508d2ca449bd","dateInput","slice"],"version":3,"file":"Invoices.5b6f2901.js.map"}