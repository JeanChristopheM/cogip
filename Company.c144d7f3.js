function e(e,t,a,n){Object.defineProperty(e,t,{get:a,set:n,enumerable:!0,configurable:!0})}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire30d9;t.register("dZ5IG",(function(a,n){var s;s=a.exports,Object.defineProperty(s,"__esModule",{value:!0,configurable:!0}),e(a.exports,"default",(()=>p));var o=t("7C6UD"),i=t("eCRxs"),c=t("kYfAi"),l=t("5H5kc"),r=t("9aCo1"),d=t("llL4i"),u=t("dv2Dk");var p=function({companies:e,contacts:t,setIsLoaded:a,isAuth:n}){const s=e.length>0,p=c.useParams(),m=c.useNavigate(),f=e.find((e=>e.id==p.companyId)),[y,h]=i.useState(!1),[j,x]=i.useState(!1),[b,g]=i.useState(!1);i.useEffect((()=>{f||m("/companies")}),[e]);const v=i.useRef(),T=i.useRef(),P=i.useRef();return o.jsxs("main",{children:[!b&&s&&f?o.jsxs("div",{className:"card",children:[o.jsxs("h2",{children:["Details about ",f.name]}),o.jsxs("div",{className:"companyGrid",children:[o.jsx("span",{children:"Name : "}),y?o.jsx("input",{type:"text",name:"companyName",defaultValue:f.name,ref:v,required:!0}):o.jsx("span",{id:"companyName",children:f.name}),o.jsx("span",{children:"VAT : "}),y?o.jsx("input",{type:"text",name:"companyVat",defaultValue:f.vat,ref:T,required:!0}):o.jsx("span",{id:"companyVat",children:f.vat}),o.jsx("span",{children:"Status : "}),y?o.jsxs("select",{name:"companyStatus",ref:P,defaultValue:f.status,required:!0,children:[o.jsx("option",{value:"",children:"Select a status"}),o.jsx("option",{value:"Supplier",children:"Supplier"}),o.jsx("option",{value:"Client",children:"Client"})]}):o.jsx("span",{id:"companyStatus",children:f.status}),o.jsx("span",{children:"___"}),o.jsx("span",{children:"___"}),o.jsx("span",{children:"Contacts : "}),o.jsx("ul",{children:t.map((e=>{if(e.contactcompany==f.id)return o.jsx("li",{onClick:()=>{m(`/contact/${e.id}`)},style:{cursor:"pointer"},children:`${e.firstname} ${e.lastname}`},e.id)}))})]}),"Admin"==n.role?o.jsx(d.default,{isModifying:y,isDeleting:j,setIsDeleting:x,setIsModifying:h,handleModif:async()=>{const e={name:v.current.value,vat:T.current.value,status:P.current.value};let t=l.companyVerify(e);if(g(!0),t.ok){const{status:t,message:s,dataPackage:o}=await r.default("PUT",`https://csharpproject.somee.com/api/company/${p.companyId}`,n.jwt,e);a(!1),g(!1),200===t?setTimeout((()=>{u.toast.success(s,{position:u.toast.POSITION.BOTTOM_RIGHT})}),250):setTimeout((()=>{u.toast.error(s,{position:u.toast.POSITION.BOTTOM_RIGHT})}),250)}else{g(!1);const e=Object.keys(t);setTimeout((()=>{for(let a of e)"ok"!==a&&u.toast.error(t[a],{position:u.toast.POSITION.BOTTOM_RIGHT})}),250)}},handleDelete:async()=>{g(!0);const{status:e,message:t}=await r.default("DELETE",`https://csharpproject.somee.com/api/Company/${f.id}`,n.jwt);g(!1),200!==e&&u.toast.error("There was an error deleting this company",{position:u.toast.POSITION.BOTTOM_RIGHT}),sessionStorage.setItem("cogipToast","Success !"),x(!1),a(!1)},company:f}):""]}):o.jsx("div",{className:"fetching",children:o.jsx("div",{className:"lds-dual-ring"})}),o.jsx(u.ToastContainer,{})]})}})),t.register("5H5kc",(function(t,a){e(t.exports,"invoiceVerify",(()=>n)),e(t.exports,"contactVerify",(()=>s)),e(t.exports,"companyVerify",(()=>o));const n=e=>{let t={};return e.reference||(t.reference="Please enter a reference"),e.company||(t.company="Please select a company"),e.amount||(t.amount="Please enter an amount"),e.contact||(t.contact="Please select a contact"),e.received||(t.received="Please select a date"),!1!==e.paid&&!0!==e.paid&&(t.paid="Please select a paid status"),t.ok=!(Object.keys(t).length>0),t},s=e=>{let t={};return e.firstname||(t.firstname="Please enter a firstname"),e.lastname||(t.lastname="Please enter a lastname"),e.contactcompany||(t.contactcompany="Please select a contact"),e.email||(t.email="Please enter an email"),e.phonenumber||(t.phonenumber="Please enter a phone number"),t.ok=!(Object.keys(t).length>0),t},o=e=>{let t={};return e.name||(t.name="Please enter a name"),e.vat||(t.vat="Please enter a vat number"),e.status||(t.status="Please select a status"),t.ok=!(Object.keys(t).length>0),t}})),t.register("llL4i",(function(a,n){e(a.exports,"default",(()=>o));var s=t("7C6UD");var o=function({isModifying:e,isDeleting:t,setIsModifying:a,setIsDeleting:n,handleModif:o,handleDelete:i}){return e?s.jsxs("div",{className:"companyControls",children:[s.jsx("button",{type:"button",onClick:o,children:"Submit"}),s.jsx("button",{type:"button",onClick:()=>{a(!1)},children:"Cancel"})]}):t?s.jsxs("div",{className:"companyControls",children:[s.jsx("button",{type:"button",onClick:i,children:"Confirm"}),s.jsx("button",{type:"button",onClick:()=>{n(!1)},children:"Cancel"})]}):s.jsxs("div",{className:"companyControls",children:[s.jsx("button",{type:"button",onClick:()=>{a(!0)},children:"Modify"}),s.jsx("button",{type:"button",onClick:()=>{n(!0)},children:"Delete"})]})}}));
//# sourceMappingURL=Company.c144d7f3.js.map
