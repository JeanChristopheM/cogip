{"mappings":"meAyGAA,YA/FgBC,QAACA,EAAOC,OAAEA,EAAMC,SAAEA,IAChC,MAAOC,EAAYC,GAAiBC,EAAAC,UAAS,GACvCC,EAAgBF,EAAAG,OAAO,MACvBC,EAAWJ,EAAAG,OAAO,MAClBE,EAAgBL,EAAAG,OAAO,MACvBG,EAAWC,EAAAC,eACVC,EAAWC,GAAgBV,EAAAC,SAAS,IAgD3C,OA/CAD,EAAAW,WAAS,KACPD,EAAa,YACZ,IA6CGE,EAAAC,KACH,OAAI,CAACC,UAAS,SAAWL,oBACvBM,EAAAC,QAAI,CAACC,YAAa,KAAMC,YAAa,CAAEC,OAAQ,kBAC/C,OAAI,CAACL,UAAU,iCACb,KAAE,UAAC,gBACH,QAAK,CACJM,IAAKlB,EACLmB,KAAK,OACLC,YAAY,aACZR,UAAU,aACVS,WAAS,UAEV,QAAK,CACJH,IAAKhB,EACLiB,KAAK,WACLC,YAAY,aACZR,UAAU,sBAEX,QAAK,CAACU,QAAQ,gBAAgBV,UAAU,6BACtC,QAAK,CACJW,KAAK,gBACLC,GAAG,gBACHL,KAAK,WACLD,IAAKf,IACL,uBAGH,SAAM,CAACqB,GAAG,cAAcC,QAvEdC,MAAUC,IACzBA,EAAEC,iBACF/B,GAAc,GACd,MAAMgC,EAAeC,IACnB,IAAKA,EAAMC,MAMT,OALAlC,GAAc,GACdiC,EAAME,UAAUC,IAAI,mBACpBC,YAAU,KACRJ,EAAME,UAAUG,OAAO,qBACtB,MACI,GAGX,GAAIN,EAAY7B,EAAcoC,UAAYP,EAAY3B,EAASkC,SAC7D,OACF,MAEMC,EAAO,CAAEC,SAFEtC,EAAcoC,QAAQL,MAEJQ,SADvBrC,EAASkC,QAAQL,QAGtBS,OAACA,EAAMC,QAAEA,EAAOC,YAAEA,SAAsBC,EAAA7B,QAC7C,OACA,iDACA,KACAuB,GAEFxC,GAAc,GACC,MAAX2C,EACFN,YAAU,KACRU,EAAAC,MAAMC,MAAML,EAAS,CACnBM,SAAUH,EAAAC,MAAMG,SAASC,iBAE1B,MAEC9C,EAAciC,QAAQc,SACxBC,aAAaC,QAAQ,YAAaC,KAAKC,UAAUZ,IAEnDa,eAAeH,QAAQ,YAAaC,KAAKC,UAAUZ,IACnDlC,EAAa,UACb0B,YAAU,KACRzC,EAAQiD,GACRtC,EAAST,EAAS6D,YACjB,gBA8B8C,eAIhD5D,EAAUc,EAAA+C,IACR,MAAG,CAAC7C,UAAU,+BACZ,MAAG,CAACA,UAAU,oBAEf,WACHgC,EAAAc,eAAc","sources":["src/components/Login.jsx"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport handleRequests from \"../logic/handleRequests.js\";\r\nimport Logo from \"./reusables/Logo.jsx\";\r\n\r\n// toaster\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n// end toaster\r\n\r\nfunction Login({ setAuth, isAuth, location }) {\r\n  const [isFetching, setIsFetching] = useState(false);\r\n  const usernameInput = useRef(null);\r\n  const pwdInput = useRef(null);\r\n  const rememberInput = useRef(null);\r\n  const navigate = useNavigate();\r\n  const [isShowing, setIsShowing] = useState(\"\");\r\n  useEffect(() => {\r\n    setIsShowing(\"appear\");\r\n  }, []);\r\n  const onAuthClick = async (e) => {\r\n    e.preventDefault();\r\n    setIsFetching(true);\r\n    const exitIfEmpty = (input) => {\r\n      if (!input.value) {\r\n        setIsFetching(false);\r\n        input.classList.add(\"blinkInputEmpty\");\r\n        setTimeout(() => {\r\n          input.classList.remove(\"blinkInputEmpty\");\r\n        }, 500);\r\n        return true;\r\n      }\r\n    };\r\n    if (exitIfEmpty(usernameInput.current) || exitIfEmpty(pwdInput.current))\r\n      return;\r\n    const username = usernameInput.current.value;\r\n    const pwd = pwdInput.current.value;\r\n    const data = { userName: username, password: pwd };\r\n\r\n    const { status, message, dataPackage } = await handleRequests(\r\n      \"POST\",\r\n      \"https://csharpproject.somee.com/api/Auth/login\",\r\n      null,\r\n      data\r\n    );\r\n    setIsFetching(false);\r\n    if (status !== 200) {\r\n      setTimeout(() => {\r\n        toast.error(message, {\r\n          position: toast.POSITION.BOTTOM_RIGHT,\r\n        });\r\n      }, 250);\r\n    } else {\r\n      if (rememberInput.current.checked) {\r\n        localStorage.setItem(\"cogipAuth\", JSON.stringify(dataPackage));\r\n      }\r\n      sessionStorage.setItem(\"cogipAuth\", JSON.stringify(dataPackage));\r\n      setIsShowing(\"begone\");\r\n      setTimeout(() => {\r\n        setAuth(dataPackage);\r\n        navigate(location.pathname);\r\n      }, 1000);\r\n    }\r\n  };\r\n  return (\r\n    <main className={`login ${isShowing}`}>\r\n      <Logo handleClick={null} handleStyle={{ height: \"10rem\" }} />\r\n      <form className=\"loginForm card\">\r\n        <h2>Login</h2>\r\n        <input\r\n          ref={usernameInput}\r\n          type=\"text\"\r\n          placeholder=\"Username :\"\r\n          className=\"loginInput\"\r\n          autoFocus\r\n        />\r\n        <input\r\n          ref={pwdInput}\r\n          type=\"password\"\r\n          placeholder=\"Password :\"\r\n          className=\"loginInput\"\r\n        />\r\n        <label htmlFor=\"rememberCheck\" className=\"rememberMe\">\r\n          <input\r\n            name=\"rememberCheck\"\r\n            id=\"rememberCheck\"\r\n            type=\"checkbox\"\r\n            ref={rememberInput}\r\n          />\r\n          Remember me\r\n        </label>\r\n        <button id=\"auth-button\" onClick={onAuthClick}>\r\n          Confirm\r\n        </button>\r\n      </form>\r\n      {isFetching ? (\r\n        <div className=\"fetching dark\">\r\n          <div className=\"lds-dual-ring\"></div>\r\n        </div>\r\n      ) : null}\r\n      <ToastContainer />\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n"],"names":["$19fef11b8b03a877$export$2e2bcd8739ae039","setAuth","isAuth","location","isFetching","setIsFetching","$eCRxs","useState","usernameInput","useRef","pwdInput","rememberInput","navigate","$kYfAi","useNavigate","isShowing","setIsShowing","useEffect","$7C6UD","jsxs","className","$hIpxR","default","handleClick","handleStyle","height","ref","type","placeholder","autoFocus","htmlFor","name","id","onClick","async","e","preventDefault","exitIfEmpty","input","value","classList","add","setTimeout","remove","current","data","userName","password","status","message","dataPackage","$9aCo1","$dv2Dk","toast","error","position","POSITION","BOTTOM_RIGHT","checked","localStorage","setItem","JSON","stringify","sessionStorage","pathname","jsx","ToastContainer"],"version":3,"file":"Login.be822497.js.map"}