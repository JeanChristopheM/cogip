function e(e,t,n,a){Object.defineProperty(e,t,{get:n,set:a,enumerable:!0,configurable:!0})}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire30d9;t.register("eXfZI",(function(n,a){var s;s=n.exports,Object.defineProperty(s,"__esModule",{value:!0,configurable:!0}),e(n.exports,"default",(()=>p));var c=t("7C6UD"),i=t("eCRxs"),l=t("kYfAi"),o=t("9jFXu"),r=t("4yknE"),d=t("9aCo1"),m=t("5H5kc"),u=t("3Ui4D"),h=t("dv2Dk");var p=function({contacts:e,companies:t,setIsLoaded:n,isAuth:a}){const s=e.length>0,p=l.useParams(),f=l.useNavigate(),j=e.find((e=>e.id==p.contactId)),[x,b]=i.useState(!1),[y,g]=i.useState(!1),[v,N]=i.useState(!1),[C,_]=i.useState(j.companies.length);i.useEffect((()=>{j||f("/contacts")}),[e]);const P=e=>{},T=e=>{let n=[];for(let a of e)n.push(t.find((e=>e.name==a.value)).id);return[...new Set([...n])]},k=async e=>{},I=async()=>{N(!0);const{status:e,message:t}=await d.default("DELETE",`https://csharpproject.somee.com/api/Contact/${j.id}`,a.jwt);N(!1),200!==e&&h.toast.error("There was an error deleting this contact",{position:h.toast.POSITION.BOTTOM_RIGHT}),sessionStorage.setItem("cogipToast","Success !"),g(!1),n(!1)};return c.jsxs("main",{children:[!v&&s&&j?c.jsxs("div",{className:"card",children:[c.jsx("h2",{children:"Details :"}),x?c.jsxs("form",{className:"contactGrid",onSubmit:async e=>{e.preventDefault(),N(!0);const t={firstname:e.target.contactFirstname.value,lastname:e.target.contactLastname.value,companies:T(e.target.company),email:e.target.contactEmail.value,phonenumber:e.target.contactPhonenumber.value};let s=m.contactVerify(t);if(s.ok){const{status:e,message:s,dataPackage:c}=await d.default("PUT",`https://csharpproject.somee.com/api/contact/${p.contactId}`,a.jwt,t);n(!1),N(!1),200===e?setTimeout((()=>{h.toast.success(s,{position:h.toast.POSITION.BOTTOM_RIGHT})}),250):setTimeout((()=>{h.toast.error(s,{position:h.toast.POSITION.BOTTOM_RIGHT})}),250)}else{N(!1);const e=Object.keys(s);setTimeout((()=>{for(let t of e)"ok"!==t&&h.toast.error(s[t],{position:h.toast.POSITION.BOTTOM_RIGHT})}),250)}},method:"post",children:[c.jsxs("fieldset",{className:"contactGrid__section",children:[c.jsx("legend",{children:"Contact"}),c.jsxs("div",{className:"contactGrid__section--child infos",children:[c.jsxs("label",{htmlFor:"contactFirstname",className:"labels",children:["Firstname :"," "]}),c.jsx("input",{type:"text",id:"contactFirstname",name:"contactFirstname",defaultValue:j.firstname})]}),c.jsxs("div",{className:"contactGrid__section--child infos",children:[c.jsxs("label",{htmlFor:"contactLastname",className:"labels",children:["Lastname :"," "]}),c.jsx("input",{type:"text",id:"contactLastname",name:"contactLastname",defaultValue:j.lastname})]}),c.jsxs("div",{className:"contactGrid__section--child infos",children:[c.jsxs("label",{htmlFor:"contactEmail",className:"labels",children:["Email :"," "]}),c.jsx("input",{type:"text",id:"contactEmail",name:"contactEmail",defaultValue:j.email})]}),c.jsxs("div",{className:"contactGrid__section--child infos",children:[c.jsxs("label",{htmlFor:"contactPhonenumber",className:"labels",children:["Phone number :"," "]}),c.jsx("input",{type:"text",id:"contactPhonenumber",name:"contactPhonenumber",defaultValue:j.phonenumber})]})]}),c.jsxs("fieldset",{className:"contactGrid__section from",children:[c.jsxs("legend",{children:["From",c.jsx("button",{type:"button",id:"addCompanySelector",onClick:()=>{_((e=>e+1))},style:{padding:"0 .5rem"},children:"+"}),c.jsx("button",{type:"button",id:"removeCompanySelector",onClick:()=>{_((e=>e>1?e-1:e))},style:{padding:"0 .5rem"},children:"-"})]}),(e=>{let n=[];for(let a=0;a<e;a++)n.push(c.jsxs("div",{className:"contactGrid__section--child selectors",children:[c.jsx("label",{children:"Company Selector : "}),c.jsx(r.default,{companies:t,currentCompany:t.filter((e=>j.companies.includes(e.id)))[a]||"",handleCompanyChange:P,name:"company"})]},a));return n})(C)]}),c.jsx("fieldset",{className:"decoration",children:c.jsx(u.default,{})}),c.jsx(o.default,{isModifying:x,setIsModifying:b,isDeleting:y,setIsDeleting:g,handleModif:k,handleDelete:I})]}):c.jsxs("div",{className:"contactGrid",children:[c.jsxs("section",{className:"contactGrid__section",children:[c.jsx("h3",{children:"Contact"}),c.jsxs("div",{className:"contactGrid__section--child infos",children:[c.jsx("span",{className:"labels",children:"Firstname : "}),c.jsx("span",{id:"contactFirstname",className:"bigger",children:j.firstname})]}),c.jsxs("div",{className:"contactGrid__section--child infos",children:[c.jsx("span",{className:"labels",children:"Lastname : "}),c.jsx("span",{id:"contactLastname",className:"bigger",children:j.lastname})]}),c.jsxs("div",{className:"contactGrid__section--child infos",children:[c.jsx("span",{className:"labels",children:"Email : "}),c.jsx("span",{id:"contactEmail",children:j.email})]}),c.jsxs("div",{className:"contactGrid__section--child infos",children:[c.jsx("span",{className:"labels",children:"Phone number : "}),c.jsx("span",{id:"contactPhonenumber",children:j.phonenumber})]})]}),c.jsxs("section",{className:"contactGrid__section",children:[c.jsx("h3",{children:"From"}),c.jsx("div",{className:"contactGrid__section--child",children:c.jsx("div",{className:"companyContainer",children:t.map((e=>{if(j.companies.includes(e.id))return c.jsxs("div",{className:"companyCard",children:[c.jsx("p",{id:"contactCompany",onClick:()=>{f(`/company/${e.id}`)},style:{cursor:"pointer"},children:e.name},e.id),c.jsx("p",{children:e.status})]},e.id)}))})})]}),c.jsx("section",{className:"decoration",children:c.jsx(u.default,{})}),"Admin"==a.role?c.jsx(o.default,{isModifying:x,setIsModifying:b,isDeleting:y,setIsDeleting:g,handleModif:k,handleDelete:I}):""]})]}):c.jsx("div",{className:"fetching",children:c.jsx("div",{className:"lds-dual-ring"})}),c.jsx(h.ToastContainer,{})]})}})),t.register("9jFXu",(function(n,a){e(n.exports,"default",(()=>c));var s=t("7C6UD");var c=function({isModifying:e,isDeleting:t,setIsModifying:n,setIsDeleting:a,handleModif:c,handleDelete:i}){return e?s.jsxs("div",{className:"contactControls",children:[s.jsx("button",{onClick:c,children:"Submit"}),s.jsx("button",{type:"button",onClick:()=>{n(!1)},children:"Cancel"})]}):t?s.jsxs("div",{className:"contactControls",children:[s.jsx("button",{type:"button",onClick:i,children:"Confirm"}),s.jsx("button",{type:"button",onClick:()=>{a(!1)},children:"Cancel"})]}):s.jsxs("div",{className:"contactControls",children:[s.jsx("button",{type:"button",onClick:()=>{n(!0)},children:"Modify"}),s.jsx("button",{type:"button",onClick:()=>{a(!0)},children:"Delete"})]})}})),t.register("4yknE",(function(n,a){e(n.exports,"default",(()=>c));var s=t("7C6UD");var c=function({companies:e,handleCompanyChange:t,currentCompany:n,name:a}){return s.jsxs("select",{onChange:n=>{let a=e.find((e=>e.name==n.target.value))?e.find((e=>e.name==n.target.value)):"";t(a)},defaultValue:n.name,name:a,required:!0,children:[s.jsx("option",{value:"",children:"Select a company"}),e.map((e=>s.jsx("option",{value:e.name,children:e.name},e.id)))]})}})),t.register("5H5kc",(function(t,n){e(t.exports,"invoiceVerify",(()=>a)),e(t.exports,"contactVerify",(()=>s)),e(t.exports,"companyVerify",(()=>c));const a=e=>{let t={};return e.reference||(t.reference="Please enter a reference"),e.company||(t.company="Please select a company"),e.amount||(t.amount="Please enter an amount"),e.received||(t.received="Please select a date"),!1!==e.paidStatus&&!0!==e.paidStatus&&(t.paid="Please select a paid status"),t.ok=!(Object.keys(t).length>0),t},s=e=>{let t={};return e.firstname||(t.firstname="Please enter a firstname"),e.lastname||(t.lastname="Please enter a lastname"),e.companies||(t.companies="Please select a contact"),e.email||(t.email="Please enter an email"),e.phonenumber||(t.phonenumber="Please enter a phone number"),t.ok=!(Object.keys(t).length>0),t},c=e=>{let t={};return e.name||(t.name="Please enter a name"),e.vat||(t.vat="Please enter a vat number"),e.town||(t.town="Please enter a town"),e.street||(t.street="Please enter a street"),e.streetnumber||(t.streetnumber="Please enter a street number"),e.country||(t.country="Please enter a country"),e.status||(t.status="Please select a status"),t.ok=!(Object.keys(t).length>0),t}}));
//# sourceMappingURL=Contact.445079a3.js.map
