function e(e,s,t,a){Object.defineProperty(e,s,{get:t,set:a,enumerable:!0,configurable:!0})}var s=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire30d9;s.register("dZ5IG",(function(t,a){var n;n=t.exports,Object.defineProperty(n,"__esModule",{value:!0,configurable:!0}),e(t.exports,"default",(()=>h));var l=s("7C6UD"),i=s("eCRxs"),c=s("kYfAi"),r=s("5H5kc"),o=s("eltSV"),d=s("9aCo1"),m=s("llL4i"),u=s("6P85y"),p=s("dv2Dk");var h=function({companies:e,contacts:s,setIsLoaded:t,isAuth:a}){const n=e.length>0,h=c.useParams(),x=c.useNavigate(),y=e.find((e=>e.id==h.companyId)),[j,f]=i.useState(!1),[b,N]=i.useState(!1),[v,g]=i.useState(!1),[_,C]=i.useState(y.contacts.length);i.useEffect((()=>{y||x("/companies")}),[e]);
//! added a contact in a company and it removed the previous one
//! tried updating an invoice and got error 400 (bad request)
//! Fix illustration on user add page
const G=e=>{let t=[];if(!e)return t;if(e.name)return""===e.value?t:[s.find((s=>`${s.firstname} ${s.lastname}`==e.value)).id];for(let a of e)""!==a.value&&t.push(s.find((e=>`${e.firstname} ${e.lastname}`==a.value)).id);return[...new Set([...t])]},S=async()=>{},T=()=>{},P=async()=>{g(!0);const{status:e,message:s}=await d.default("DELETE",`https://csharpproject.somee.com/api/Company/${y.id}`,a.jwt);g(!1),200!==e&&p.toast.error("There was an error deleting this company",{position:p.toast.POSITION.BOTTOM_RIGHT}),sessionStorage.setItem("cogipToast","Success !"),N(!1),t(!1)};return l.jsxs("main",{children:[!v&&n&&y?l.jsxs("div",{className:"card",children:[l.jsx("h2",{children:"Details :"}),j?l.jsx(l.Fragment,{children:l.jsxs("form",{className:"companyGrid",onSubmit:async e=>{e.preventDefault(),g(!0);const s={name:e.target.companyName.value,vat:e.target.companyVat.value,status:e.target.companyStatus.value,streetnumber:e.target.streetnumber.value,street:e.target.street.value,town:e.target.town.value,country:e.target.country.value,zip:e.target.zip.value,contacts:G(e.target.contact)};console.log(s);let n=r.companyVerify(s);if(g(!0),n.ok){const{status:e,message:n,dataPackage:l}=await d.default("PUT",`https://csharpproject.somee.com/api/company/${h.companyId}`,a.jwt,s);t(!1),g(!1),200===e?setTimeout((()=>{p.toast.success(n,{position:p.toast.POSITION.BOTTOM_RIGHT})}),250):setTimeout((()=>{p.toast.error(n,{position:p.toast.POSITION.BOTTOM_RIGHT})}),250)}else{g(!1);const e=Object.keys(n);setTimeout((()=>{for(let s of e)"ok"!==s&&p.toast.error(n[s],{position:p.toast.POSITION.BOTTOM_RIGHT})}),250)}},method:"post",children:[l.jsxs("section",{className:"companyGrid__section",children:[l.jsxs("div",{className:"companyGrid__section--child name",children:[l.jsx("span",{className:"labels",children:"Name : "}),l.jsx("input",{type:"text",name:"companyName",defaultValue:y.name,required:!0})]}),l.jsxs("div",{className:"companyGrid__section--child",children:[l.jsx("span",{className:"labels",children:"VAT : "}),l.jsx("input",{type:"text",name:"companyVat",defaultValue:y.vat,required:!0})]}),l.jsxs("div",{className:"companyGrid__section--child",children:[l.jsx("span",{className:"labels",children:"Status : "}),l.jsxs("select",{name:"companyStatus",defaultValue:y.status,required:!0,children:[l.jsx("option",{value:"",children:"Select a status"}),l.jsx("option",{value:"Supplier",children:"Supplier"}),l.jsx("option",{value:"Customer",children:"Customer"})]})]})]}),l.jsxs("section",{className:"companyGrid__section adress",children:[l.jsx("h3",{children:"Where"}),l.jsxs("div",{className:"companyGrid__section--child adress",children:[l.jsxs("label",{htmlFor:"streetnumber",className:"labels",children:["Street Number :"," "]}),l.jsx("input",{type:"text",id:"streetnumber",name:"streetnumber",defaultValue:y.streetnumber})]}),l.jsxs("div",{className:"companyGrid__section--child adress",children:[l.jsxs("label",{htmlFor:"street",className:"labels",children:["Street :"," "]}),l.jsx("input",{type:"text",id:"street",name:"street",defaultValue:y.street})]}),l.jsxs("div",{className:"companyGrid__section--child adress",children:[l.jsxs("label",{htmlFor:"town",className:"labels",children:["Town :"," "]}),l.jsx("input",{type:"text",id:"town",name:"town",defaultValue:y.town})]}),l.jsxs("div",{className:"companyGrid__section--child adress",children:[l.jsxs("label",{htmlFor:"zip",className:"labels",children:["Zip Code :"," "]}),l.jsx("input",{type:"text",id:"zip",name:"zip",defaultValue:y.zip})]}),l.jsxs("div",{className:"companyGrid__section--child adress",children:[l.jsxs("label",{htmlFor:"country",className:"labels",children:["Country :"," "]}),l.jsx("input",{type:"text",id:"country",name:"country",defaultValue:y.country})]})]}),l.jsxs("fieldset",{className:"companyGrid__section",children:[l.jsxs("legend",{children:["Contacts"," ",l.jsx("button",{type:"button",id:"addCompanySelector",onClick:()=>{C((e=>e+1))},style:{padding:"0 .5rem"},children:"+"}),l.jsx("button",{type:"button",id:"removeCompanySelector",onClick:()=>{C((e=>e>=1?e-1:e)),console.log(_)},style:{padding:"0 .5rem"},children:"-"})]}),_?(e=>{let t=[];for(let a=0;a<e;a++){const e=y.contacts.length>0&&s.filter((e=>y.contacts.includes(e.id)))[a]?s.filter((e=>y.contacts.includes(e.id)))[a]:"";t.push(l.jsxs("div",{className:"contactGrid__section--child selectors",children:[l.jsx("label",{children:"Company Selector : "}),l.jsx(o.default,{contacts:s,currentContact:e,selectedCompany:{contacts:s.reduce(((e,s)=>(e.push(s.id),e)),[])},handleContactChange:T,name:"contact"},a)]},a))}return t})(_):"No contact"]}),l.jsx("section",{className:"decoration",children:l.jsx(u.default,{})}),l.jsx(m.default,{isModifying:j,isDeleting:b,setIsDeleting:N,setIsModifying:f,handleModif:S,handleDelete:P,company:y})]})}):l.jsx(l.Fragment,{children:l.jsxs("div",{className:"companyGrid",children:[l.jsxs("section",{className:"companyGrid__section",children:[l.jsxs("div",{className:"companyGrid__section--child name",children:[l.jsx("span",{className:"labels",children:"Name : "}),l.jsx("span",{id:"companyName",children:y.name})]}),l.jsxs("div",{className:"companyGrid__section--child",children:[l.jsx("span",{className:"labels",children:"VAT : "}),l.jsx("span",{id:"companyVat",children:y.vat})]}),l.jsxs("div",{className:"companyGrid__section--child",children:[l.jsx("span",{className:"labels",children:"Status : "}),l.jsx("span",{id:"companyStatus",children:y.status})]})]}),l.jsxs("section",{className:"companyGrid__section adress",children:[l.jsx("h3",{children:"Where"}),l.jsxs("div",{className:"companyGrid__section--child",children:[l.jsx("span",{className:"labels",children:"Number : "}),l.jsx("span",{children:y.streetnumber})]}),l.jsxs("div",{className:"companyGrid__section--child",children:[l.jsx("span",{className:"labels",children:"Street : "}),l.jsx("span",{children:y.street})]}),l.jsxs("div",{className:"companyGrid__section--child",children:[l.jsx("span",{className:"labels",children:"Town : "}),l.jsx("span",{children:y.town})]}),l.jsxs("div",{className:"companyGrid__section--child",children:[l.jsx("span",{className:"labels",children:"Zip Code : "}),l.jsx("span",{children:y.zip})]}),l.jsxs("div",{className:"companyGrid__section--child",children:[l.jsx("span",{className:"labels",children:"Country : "}),l.jsx("span",{children:y.country})]})]}),l.jsxs("section",{className:"companyGrid__section",children:[l.jsx("h3",{children:"Contacts"}),l.jsx("div",{className:"companyGrid__section--child",children:y.contacts.length>0?l.jsx("ul",{children:s.map((e=>{if(e.companies.includes(y.id))return l.jsx("li",{onClick:()=>{x(`/contact/${e.id}`)},style:{cursor:"pointer"},children:`${e.firstname} ${e.lastname}`},e.id)}))}):l.jsx("span",{children:"None"})})]}),l.jsx("section",{className:"decoration",children:l.jsx(u.default,{})}),"Admin"==a.role?l.jsx(m.default,{isModifying:j,isDeleting:b,setIsDeleting:N,setIsModifying:f,handleModif:S,handleDelete:P,company:y}):""]})})]}):l.jsx("div",{className:"fetching",children:l.jsx("div",{className:"lds-dual-ring"})}),l.jsx(p.ToastContainer,{})]})}})),s.register("5H5kc",(function(s,t){e(s.exports,"invoiceVerify",(()=>a)),e(s.exports,"contactVerify",(()=>n)),e(s.exports,"companyVerify",(()=>l));const a=e=>{let s={};return e.reference||(s.reference="Please enter a reference"),e.company||(s.company="Please select a company"),e.amount||(s.amount="Please enter an amount"),e.received||(s.received="Please select a date"),!1!==e.paidStatus&&!0!==e.paidStatus&&(s.paid="Please select a paid status"),s.ok=!(Object.keys(s).length>0),s},n=e=>{let s={};return e.firstname||(s.firstname="Please enter a firstname"),e.lastname||(s.lastname="Please enter a lastname"),e.companies||(s.companies="Please select a contact"),e.email||(s.email="Please enter an email"),e.phonenumber||(s.phonenumber="Please enter a phone number"),s.ok=!(Object.keys(s).length>0),s},l=e=>{let s={};return e.name||(s.name="Please enter a name"),e.vat||(s.vat="Please enter a vat number"),e.town||(s.town="Please enter a town"),e.street||(s.street="Please enter a street"),e.streetnumber||(s.streetnumber="Please enter a street number"),e.country||(s.country="Please enter a country"),e.status||(s.status="Please select a status"),s.ok=!(Object.keys(s).length>0),s}})),s.register("llL4i",(function(t,a){e(t.exports,"default",(()=>l));var n=s("7C6UD");var l=function({isModifying:e,isDeleting:s,setIsModifying:t,setIsDeleting:a,handleModif:l,handleDelete:i}){return e?n.jsxs("div",{className:"companyControls",children:[n.jsx("button",{onClick:l,children:"Submit"}),n.jsx("button",{type:"button",onClick:()=>{t(!1)},children:"Cancel"})]}):s?n.jsxs("div",{className:"companyControls",children:[n.jsx("button",{type:"button",onClick:i,children:"Confirm"}),n.jsx("button",{type:"button",onClick:()=>{a(!1)},children:"Cancel"})]}):n.jsxs("div",{className:"companyControls",children:[n.jsx("button",{type:"button",onClick:()=>{t(!0)},children:"Modify"}),n.jsx("button",{type:"button",onClick:()=>{a(!0)},children:"Delete"})]})}}));
//# sourceMappingURL=Company.be6ebb46.js.map
