function e(e,n,t,a){Object.defineProperty(e,n,{get:t,set:a,enumerable:!0,configurable:!0})}var n=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire30d9;n.register("eXfZI",(function(t,a){var s;s=t.exports,Object.defineProperty(s,"__esModule",{value:!0,configurable:!0}),e(t.exports,"default",(()=>h));var c=n("7C6UD"),i=n("eCRxs"),l=n("kYfAi"),r=n("9jFXu"),o=n("4yknE"),d=n("9aCo1");n("5H5kc");var m=n("3Ui4D"),u=n("dv2Dk");var h=function({contacts:e,companies:n,setIsLoaded:t,isAuth:a}){const s=e.length>0,h=l.useParams(),f=l.useNavigate(),p=e.find((e=>e.id==h.contactId)),x=p?n.find((e=>e.id==p.companies[0])):null,[j,b]=i.useState(x),[y,v]=i.useState(!1),[g,N]=i.useState(!1),[C,_]=i.useState(!1);i.useEffect((()=>{p||f("/contacts")}),[e]);const P=i.useRef(),k=i.useRef(),G=i.useRef(),D=i.useRef();return c.jsxs("main",{children:[!C&&s&&p?c.jsxs("div",{className:"card",children:[c.jsx("h2",{children:"Details :"}),y?c.jsxs("form",{className:"contactGrid",children:[c.jsxs("section",{className:"contactGrid__section",children:[c.jsx("h3",{children:"Contact"}),c.jsxs("div",{className:"contactGrid__section--child infos",children:[c.jsxs("label",{htmlFor:"contactFirstname",className:"labels",children:["Firstname :"," "]}),c.jsx("input",{type:"text",id:"contactFirstname",name:"contactFirstname",defaultValue:p.firstname,ref:P})]}),c.jsxs("div",{className:"contactGrid__section--child infos",children:[c.jsxs("label",{htmlFor:"contactLastname",className:"labels",children:["Lastname :"," "]}),c.jsx("input",{type:"text",id:"contactLastname",name:"contactLastname",defaultValue:p.lastname,ref:k})]}),c.jsxs("div",{className:"contactGrid__section--child infos",children:[c.jsxs("label",{htmlFor:"contactEmail",className:"labels",children:["Email :"," "]}),c.jsx("input",{type:"text",id:"contactEmail",name:"contactEmail",defaultValue:p.email,ref:G})]}),c.jsxs("div",{className:"contactGrid__section--child infos",children:[c.jsxs("label",{htmlFor:"contactPhonenumber",className:"labels",children:["Phone number :"," "]}),c.jsx("input",{type:"text",id:"contactPhonenumber",name:"contactPhonenumber",defaultValue:p.phonenumber,ref:D})]})]}),c.jsxs("section",{className:"contactGrid__section",children:[c.jsx("h3",{children:"From"}),c.jsx(o.default,{currentCompany:x,companies:n,name:"contactCompany",handleCompanyChange:e=>{b(e)}})]}),c.jsx("section",{className:"decoration",children:c.jsx(m.default,{})})]}):c.jsxs("div",{className:"contactGrid",children:[c.jsxs("section",{className:"contactGrid__section",children:[c.jsx("h3",{children:"Contact"}),c.jsxs("div",{className:"contactGrid__section--child infos",children:[c.jsx("span",{className:"labels",children:"Firstname : "}),c.jsx("span",{id:"contactFirstname",className:"bigger",children:p.firstname})]}),c.jsxs("div",{className:"contactGrid__section--child infos",children:[c.jsx("span",{className:"labels",children:"Lastname : "}),c.jsx("span",{id:"contactLastname",className:"bigger",children:p.lastname})]}),c.jsxs("div",{className:"contactGrid__section--child infos",children:[c.jsx("span",{className:"labels",children:"Email : "}),c.jsx("span",{id:"contactEmail",children:p.email})]}),c.jsxs("div",{className:"contactGrid__section--child infos",children:[c.jsx("span",{className:"labels",children:"Phone number : "}),c.jsx("span",{id:"contactPhonenumber",children:p.phonenumber})]})]}),c.jsxs("section",{className:"contactGrid__section",children:[c.jsx("h3",{children:"From"}),c.jsx("div",{className:"contactGrid__section--child",children:c.jsx("div",{className:"companyContainer",children:n.map((e=>{if(p.companies.includes(e.id))return c.jsx("div",{className:"companyCard",children:c.jsx("p",{id:"contactCompany",onClick:()=>{f(`/company/${e.id}`)},style:{cursor:"pointer"},children:e.name},e.id)},e.id)}))})})]}),c.jsx("section",{className:"decoration",children:c.jsx(m.default,{})})]}),"Admin"==a.role?c.jsx(r.default,{isModifying:y,setIsModifying:v,isDeleting:g,setIsDeleting:N,handleModif:async()=>{_(!0);const e={firstname:P.current.value,lastname:k.current.value,companies:j.id.toString(),email:G.current.value,phonenumber:D.current.value};console.log(e)},handleDelete:async()=>{_(!0);const{status:e,message:n}=await d.default("DELETE",`https://csharpproject.somee.com/api/Contact/${p.id}`,a.jwt);_(!1),200!==e&&u.toast.error("There was an error deleting this contact",{position:u.toast.POSITION.BOTTOM_RIGHT}),sessionStorage.setItem("cogipToast","Success !"),N(!1),t(!1)}}):""]}):c.jsx("div",{className:"fetching",children:c.jsx("div",{className:"lds-dual-ring"})}),c.jsx(u.ToastContainer,{})]})}})),n.register("9jFXu",(function(t,a){e(t.exports,"default",(()=>c));var s=n("7C6UD");var c=function({isModifying:e,isDeleting:n,setIsModifying:t,setIsDeleting:a,handleModif:c,handleDelete:i}){return e?s.jsxs("div",{className:"contactControls",children:[s.jsx("button",{type:"button",onClick:c,children:"Submit"}),s.jsx("button",{type:"button",onClick:()=>{t(!1)},children:"Cancel"})]}):n?s.jsxs("div",{className:"contactControls",children:[s.jsx("button",{type:"button",onClick:i,children:"Confirm"}),s.jsx("button",{type:"button",onClick:()=>{a(!1)},children:"Cancel"})]}):s.jsxs("div",{className:"contactControls",children:[s.jsx("button",{type:"button",onClick:()=>{t(!0)},children:"Modify"}),s.jsx("button",{type:"button",onClick:()=>{a(!0)},children:"Delete"})]})}})),n.register("4yknE",(function(t,a){e(t.exports,"default",(()=>c));var s=n("7C6UD");var c=function({companies:e,handleCompanyChange:n,currentCompany:t,name:a}){return s.jsxs("select",{onChange:t=>{let a=e.find((e=>e.name==t.target.value))?e.find((e=>e.name==t.target.value)):"";n(a)},defaultValue:t.name,name:a,required:!0,children:[s.jsx("option",{value:"",children:"Select a company"}),e.map((e=>s.jsx("option",{value:e.name,children:e.name},e.id)))]})}})),n.register("5H5kc",(function(n,t){e(n.exports,"invoiceVerify",(()=>a)),e(n.exports,"contactVerify",(()=>s)),e(n.exports,"companyVerify",(()=>c));const a=e=>{let n={};return e.reference||(n.reference="Please enter a reference"),e.company||(n.company="Please select a company"),e.amount||(n.amount="Please enter an amount"),e.received||(n.received="Please select a date"),!1!==e.paidStatus&&!0!==e.paidStatus&&(n.paid="Please select a paid status"),n.ok=!(Object.keys(n).length>0),n},s=e=>{let n={};return e.firstname||(n.firstname="Please enter a firstname"),e.lastname||(n.lastname="Please enter a lastname"),e.companies||(n.companies="Please select a contact"),e.email||(n.email="Please enter an email"),e.phonenumber||(n.phonenumber="Please enter a phone number"),n.ok=!(Object.keys(n).length>0),n},c=e=>{let n={};return e.name||(n.name="Please enter a name"),e.vat||(n.vat="Please enter a vat number"),e.town||(n.town="Please enter a town"),e.street||(n.street="Please enter a street"),e.streetnumber||(n.streetnumber="Please enter a street number"),e.country||(n.country="Please enter a country"),e.status||(n.status="Please select a status"),n.ok=!(Object.keys(n).length>0),n}}));
//# sourceMappingURL=Contact.25d5bfac.js.map
